{"version":3,"sources":["../../src/controllers/qBankBookMark.server.controller.js"],"names":["createBookMark","req","res","next","console","log","JSON","stringify","body","userId","qbId","newQBankBookMark","user","qBank","save","err","bm","json","success","message","checkIsBookMarked","qbIds","find","exec","qb","removeBookMark","findOneAndRemove","qbBm"],"mappings":";;;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEO,IAAMA,0CAAiB,SAAjBA,cAAiB,CAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAkB;AAC9CC,UAAQC,GAAR,CAAY,qBAAmBC,KAAKC,SAAL,CAAeN,IAAIO,IAAnB,CAA/B;AACA,MAAIC,SAASR,IAAIO,IAAJ,CAASC,MAAtB;AACA,MAAIC,OAAOT,IAAIO,IAAJ,CAASE,IAApB;AACA,MAAGD,UAAUC,IAAb,EAAkB;AAChB,QAAMC,mBAAmB,kCAAkB;AACzCC,YAAKH,MADoC;AAEzCI,aAAMH;AAFmC,KAAlB,CAAzB;AAIAC,qBAAiBG,IAAjB,CAAsB,UAACC,GAAD,EAAKC,EAAL,EAAY;AAChC,UAAGD,GAAH,EAAQ;AACH,eAAOb,IAAIe,IAAJ,CAAS,EAACC,SAAQ,KAAT,EAAeC,SAAQ,uBAAvB,EAA+CJ,QAA/C,EAAT,CAAP;AACJ,OAFD,MAGI;AACFd,YAAIe,EAAJ,GAASA,EAAT;AACAb;AACD;AACF,KARD;AASD;AACF,CAnBM,C,CALP;AA0BO,IAAMiB,gDAAoB,SAApBA,iBAAoB,CAACnB,GAAD,EAAKC,GAAL,EAAa;AAC5CE,UAAQC,GAAR,CAAY,wBAAsBC,KAAKC,SAAL,CAAeN,IAAIO,IAAnB,CAAlC;AACA,MAAIC,SAASR,IAAIO,IAAJ,CAASC,MAAtB;AACA,MAAIY,QAAQpB,IAAIO,IAAJ,CAASa,KAArB;AACA,MAAGZ,UAAUY,KAAb,EAAmB;AACjB,kCAAcC,IAAd,CAAmB;AACjBV,YAAKH,MADY;AAEjBI,aAAM;AACJ,eAAMQ;AADF;AAFW,KAAnB,EAKGE,IALH,CAKQ,UAACR,GAAD,EAAKS,EAAL,EAAY;AAClB,UAAGT,GAAH,EAAQ;AACH,eAAOb,IAAIe,IAAJ,CAAS,EAACC,SAAQ,KAAT,EAAeC,SAAQ,uBAAvB,EAA+CJ,QAA/C,EAAT,CAAP;AACJ,OAFD,MAGK;AACHX,gBAAQC,GAAR,CAAYmB,EAAZ;AACA,eAAOtB,IAAIe,IAAJ,CAAS;AACdC,mBAAQ,IADM;AAEdC,mBAAQ,mCAFM;AAGdK;AAHc,SAAT,CAAP;AAKD;AACF,KAjBD;AAkBD;AACF,CAxBM;;AA0BA,IAAMC,0CAAiB,SAAjBA,cAAiB,CAACxB,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAkB;AAC9CC,UAAQC,GAAR,CAAY,qBAAmBC,KAAKC,SAAL,CAAeN,IAAIO,IAAnB,CAA/B;AACA,MAAIC,SAASR,IAAIO,IAAJ,CAASC,MAAtB;AACA,MAAIC,OAAOT,IAAIO,IAAJ,CAASE,IAApB;AACA,MAAGD,UAAUC,IAAb,EAAkB;AAChB,kCAAcgB,gBAAd,CAA+B;AAC/Bd,YAAKH,MAD0B;AAE/BI,aAAMH;AAFyB,KAA/B,EAGA,UAACK,GAAD,EAAKS,EAAL,EAAY;AACV,UAAGT,GAAH,EAAQ;AACN,eAAOb,IAAIe,IAAJ,CAAS,EAACC,SAAQ,KAAT,EAAeC,SAAQ,uBAAvB,EAAT,CAAP;AACD,OAFD,MAGI;AACF,YAAGK,EAAH,EAAM;AACJvB,cAAI0B,IAAJ,GAAWH,EAAX;AACArB;AACD,SAHD,MAII;AACF,iBAAOD,IAAIe,IAAJ,CAAS,EAACC,SAAQ,KAAT,EAAeC,SAAQ,yBAAvB,EAAT,CAAP;AACD;AACF;AACF,KAhBD;AAiBD;AACF,CAvBM","file":"qBankBookMark.server.controller.js","sourcesContent":["// ./user-expressjs-backend/controllers/qBankBookMark.server.controller.js\nimport User from '../models/user.server.model';\nimport qBank from '../models/qBank.server.model';\nimport qBankBookMark from '../models/qBankBookMark.server.model';\n\nexport const createBookMark = (req,res,next) => {\n  console.log('createBookMark: '+JSON.stringify(req.body));\n  let userId = req.body.userId;\n  let qbId = req.body.qbId;\n  if(userId && qbId){\n    const newQBankBookMark = new qBankBookMark({\n      user:userId,\n      qBank:qbId\n    });\n    newQBankBookMark.save((err,bm) => {\n      if(err) {\n           return res.json({success:false,message:'Something going wrong',err});\n      }\n      else{\n        req.bm = bm;\n        next();\n      }\n    });\n  }\n}\n\nexport const checkIsBookMarked = (req,res) => {\n  console.log('checkIsBookMarked: '+JSON.stringify(req.body));\n  let userId = req.body.userId;\n  let qbIds = req.body.qbIds;\n  if(userId && qbIds){\n    qBankBookMark.find({\n      user:userId,\n      qBank:{\n        \"$in\":qbIds\n      }\n    }).exec((err,qb) => {\n      if(err) {\n           return res.json({success:false,message:'Something going wrong',err});\n      }\n      else {\n        console.log(qb)\n        return res.json({\n          success:true,\n          message:'Fetched BookMarked Question Banks',\n          qb\n        });\n      }\n    })\n  }\n}\n\nexport const removeBookMark = (req,res,next) => {\n  console.log('removeBookMark: '+JSON.stringify(req.body));\n  let userId = req.body.userId;\n  let qbId = req.body.qbId;\n  if(userId && qbId){\n    qBankBookMark.findOneAndRemove({\n    user:userId,\n    qBank:qbId\n  },(err,qb) => {\n      if(err) {\n        return res.json({success:false,message:'Something going wrong'});\n      }\n      else{\n        if(qb){\n          req.qbBm = qb;\n          next();\n        }\n        else{\n          return res.json({success:false,message:'Question Bank Not Found'});\n        }\n      }\n    })\n  }\n}\n"]}